version: '3.7'
services:
  sigdep3:
    image: partnersinhealth/openmrs-server:latest
    restart: unless-stopped
    container_name: sigdep3
    hostname: sigdep3
    environment:
      - OMRS_JAVA_SERVER_OPTS=${OMRS_JAVA_SERVER_OPTS}
      - OMRS_JAVA_MEMORY_OPTS=${OMRS_JAVA_MEMORY_OPTS}
      - OMRS_CONFIG_CONNECTION_SERVER=${OMRS_CONFIG_CONNECTION_SERVER}
      - OMRS_CONFIG_CREATE_DATABASE_USER=${OMRS_CONFIG_CREATE_DATABASE_USER}
      - OMRS_CONFIG_CONNECTION_USERNAME=${OMRS_CONFIG_CONNECTION_USERNAME}
      - OMRS_CONFIG_CONNECTION_PASSWORD=${OMRS_CONFIG_CONNECTION_PASSWORD}
      - OMRS_CONFIG_CONNECTION_ROOT_PASSWORD=${OMRS_CONFIG_CONNECTION_ROOT_PASSWORD}
      - OMRS_CONFIG_CONNECTION_EXTRA_ARGS=${OMRS_CONFIG_CONNECTION_EXTRA_ARGS}
      - OMRS_CONFIG_CREATE_TABLES=${OMRS_CONFIG_CREATE_TABLES}
      - OMRS_CONFIG_ADD_DEMO_DATA=${OMRS_CONFIG_ADD_DEMO_DATA}
      - OMRS_CONFIG_HAS_CURRENT_OPENMRS_DATABASE=${OMRS_CONFIG_HAS_CURRENT_OPENMRS_DATABASE}
      - OMRS_DEV_DEBUG_PORT=${OMRS_DEV_DEBUG_PORT}
      - OMRS_CONFIG_AUTO_UPDATE_DATABASE=${OMRS_CONFIG_AUTO_UPDATE_DATABASE}
      # - OMRS_CONFIG_CONNECTION_URL=${OMRS_CONFIG_CONNECTION_URL}
    volumes:
      - ./configs/sigdep3/distribution:/openmrs/distribution
      # uncomment to persist the volumes on the Host file system
      #- .data/sigdep3:/openmrs/data
    ports:
      - "8080:8080"
      - "1044:1044"